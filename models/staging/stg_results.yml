version: 2

models:
  - name: stg_results
    columns:
      - name: id_result
        description: "Result ID as string"
        tests:
          - unique
          - not_null
      - name: id_race
        description: "Race ID as string"
        tests:
          - not_null
          # - relationships:
              # to: ref('stg_races')
              # field: id_race
      - name: id_driver
        description: "Driver ID as string"
        tests:
          - not_null
          # - relationships:
             # to: ref('stg_drivers')
            # field: id_driver
      - name: id_constructor
        description: "Constructor ID as string"
        tests:
          - not_null
          # - relationships:
            #  to: ref('stg_constructors')
            #  field: id_constructor
      - name: car_number
        description: "Car number"
        tests:
          - not_null
      - name: start_position
        description: "Start position"
        tests:
          - not_null
      - name: end_position
        description: "End position"
        tests:
          - not_null
      - name: final_rank
        description: "Final rank"
        tests:
          - not_null
      - name: points_gained
        description: "Points gained"
        tests:
          - not_null
      - name: laps_driven
        description: "Laps driven"
        tests:
          - not_null
      - name: fastest_lap
        description: "Fastest lap"
        tests:
          - dbt_utils.not_accepted_values:
              values: ['%N']
      - name: fastest_lap_rank
        description: "Fastest lap rank"
        tests:
          - dbt_utils.not_accepted_values:
              values: ['%N']
      - name: fastest_lap_speed
        description: "Fastest lap speed"
        tests:
          - dbt_utils.not_accepted_values:
              values: ['%N']
      - name: total_milliseconds_elapsed
        description: "Total milliseconds elapsed"
        tests:
          - dbt_utils.not_accepted_values:
              values: ['%N']
      - name: id_status
        description: "Status ID as string"
        tests:
          - not_null
